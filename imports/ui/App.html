<body>
    {{> mainContainer}}
</body>

<template name="mainContainer">
    <div class="app">
        <header>
            <div class="app-bar">
                <div class="app-header">
                    <h1>Cosmic To-Do with Meteor.js!</h1>
                </div>
            </div>
            {{#if isUserLogged}}
            <p class="count">Incomplete To-Do Count:
                {{#if incompleteCount}}
                {{incompleteCount}}
                {{else}}
                <span> Noting to do!</span>
                {{/if}}
            </p>

            {{/if}}
        </header>

        <div class="main">
            {{#if isUserLogged}}

            {{> form }}

            {{#if incompleteCount}}
            <div class="filter">
                <button id="hide-completed-button">
                    {{#if hideCompleted}}
                    Show All
                    {{else}}
                    Hide Completed
                    {{/if}}
                </button>
            </div>
            {{/if}}

            {{#if isLoaing}}
                <div class="loading">
                    Loading... Please wait!
                </div>
            {{/if}}

            <ul class="tasks">
                {{#each tasks}}
                {{> task}}
                {{/each}}
            </ul>

            <div class="logout">
                You are Logged in as: {{getUser.username}}
                <button class="user">
                    Get Out
                </button>
            </div>

            {{else}}
            {{> login}}

            {{/if}}
        </div>
    </div>
</template>

<template name="form">
    <form class="task-form">
        <input type="text" name="text" placeholder="Type to add new tasks" />
        <button type="submit">Add Task</button>
    </form>
</template>